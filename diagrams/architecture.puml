@startuml
!theme plain
skinparam linetype ortho

package "Flake" {
  [flake.nix] as Flake
  [hosts.nix] as Hosts
  [home.nix] as Home
}

package "System Configuration" {
  [mkNixosSystem] as MkNixOS
  [mkDarwinSystem] as MkDarwin
  [paths] as Paths
}

package "Host Configurations" {
  [desktop] as Desktop
  [pocket] as Pocket
  [macbook] as MacBook
}

package "System Modules" {
  [base] as Base
  [users] as Users
  [bootloader] as Bootloader
  
  package "Feature Modules" {
    [hyprland] as Hyprland
    [wayland] as Wayland 
    [nvidia] as Nvidia
  }
  
  package "Configuration System" {
    [config] as Config
    [hardware.nix] as Hardware
    [desktop.nix] as DesktopConfig
    [development.nix] as Development
    [networking.nix] as Networking
  }
  
  package "Utilities" {
    [conditional.nix] as Conditional
    [module-system.nix] as ModuleSystem
  }
}

package "Home Configuration" {
  [mkHomeConfig] as MkHome
  
  package "Home Modules" {
    [zsh] as Zsh
    [neovim] as Neovim
    [nushell] as NuShell
  }
  
  package "Home Profiles" {
    [linux-desktop] as LinuxDesktop
    [darwin] as DarwinProfile
  }
}

' Relationships
Flake --> MkNixOS
Flake --> MkDarwin
Flake --> MkHome
Flake --> Paths

MkNixOS --> Desktop
MkNixOS --> Pocket
MkDarwin --> MacBook

Desktop --> Base
Desktop --> Users
Desktop --> Bootloader
Desktop --> Hyprland
Desktop --> Wayland
Desktop --> Nvidia
Desktop --> Config

Pocket --> Base
Pocket --> Users
Pocket --> Bootloader
Pocket --> Hyprland
Pocket --> Wayland

MacBook --> Base
MacBook --> Users

Config --> Hardware
Config --> DesktopConfig
Config --> Development
Config --> Networking

ModuleSystem --> Config
Conditional --> Hyprland
Conditional --> Wayland
Conditional --> Nvidia

MkHome --> LinuxDesktop
MkHome --> DarwinProfile

LinuxDesktop --> Zsh
LinuxDesktop --> Neovim
LinuxDesktop --> NuShell

DarwinProfile --> Zsh
DarwinProfile --> Neovim

@enduml